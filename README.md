# WeDigest

> å¾®ä¿¡å…¬ä¼—å·æ–‡ç« æ™ºèƒ½å­¦ä¹ ç¬”è®° - ä½¿ç”¨ AI è‡ªåŠ¨ç”Ÿæˆç»“æ„åŒ–ã€æ˜“è¯»çš„æ·±åº¦ç ”æŠ¥

[![Next.js](https://img.shields.io/badge/Next.js-16.1-black)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-19.2-blue)](https://react.dev/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue)](https://www.typescriptlang.org/)
[![Prisma](https://img.shields.io/badge/Prisma-5.x-2D3748)](https://www.prisma.io/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

ä½¿ç”¨ AI è‡ªåŠ¨å°†å¾®ä¿¡å…¬ä¼—å·æ–‡ç« è½¬åŒ–ä¸º**æ·±åº¦ç ”æŠ¥çº§å­¦ä¹ ç¬”è®°**ï¼Œæ”¯æŒå¤šç§ AI æ¨¡å‹ï¼ˆOpenAIã€DeepSeekã€æ™ºè°±AIï¼‰ã€æµå¼è¾“å‡ºã€è‡ªå®šä¹‰ Prompt æ¨¡æ¿ã€å¤šæ¨¡å‹å¯¹æ¯”ç­‰åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- **æ™ºèƒ½æ–‡ç« æŠ“å–** - è‡ªåŠ¨æŠ“å–å¾®ä¿¡å…¬ä¼—å·æ–‡ç« å†…å®¹ï¼Œæ”¯æŒåŠ¨æ€æ¸²æŸ“é¡µé¢
- **AI æ·±åº¦ç ”æŠ¥ç”Ÿæˆ** - é¦–å¸­æ¶æ„å¸ˆè§†è§’ï¼Œä¸»åŠ¨æ‹“å±•æŠ€æœ¯èƒŒæ™¯å’ŒçŸ¥è¯†ç½‘ç»œ
- **å®æ—¶æµå¼è¾“å‡º** - AI ç”Ÿæˆå†…å®¹é€å­—æ˜¾ç¤ºï¼Œå®æ—¶é¢„è§ˆ
- **è‡ªå®šä¹‰ Prompt æ¨¡æ¿** - 6 ç§é¢„è®¾æ¨¡æ¿ + è‡ªå®šä¹‰æ¨¡æ¿
- **å¤šæ¨¡å‹å¯¹æ¯”** - åŒæ—¶ä½¿ç”¨å¤šä¸ª AI æ¨¡å‹ï¼Œå¹¶æ’å¯¹æ¯”ç»“æœ
- **æ ‡ç­¾ç®¡ç†** - è‡ªåŠ¨æå–æ–‡ç« æ ‡ç­¾ï¼Œæ”¯æŒæ ‡ç­¾ç­›é€‰

### ğŸ“š æ·±åº¦ç ”æŠ¥ç‰¹æ€§

- **ç¬¬ä¸€æ€§åŸç†é‡æ„** - æç‚¼æ ¸å¿ƒç—›ç‚¹å’Œè§£å†³è·¯å¾„
- **å…³é”®æŠ€æœ¯æ‹“å±•** - è‡ªåŠ¨è¡¥å……æŠ€æœ¯èƒŒæ™¯ã€åŸç†å’Œç«å“å¯¹æ¯”
- **ç‹¬å®¶æ´å¯Ÿä¸æ‰¹åˆ¤** - ç±»æ¯”ç†è§£ã€æ½œåœ¨å±€é™ã€é€‚ç”¨åœºæ™¯
- **è¡ŒåŠ¨å»ºè®®** - å¯æ“ä½œçš„å­¦ä¹ å’Œå®è·µå»ºè®®
- **YAML å…ƒæ•°æ®** - æ”¯æŒ Notionã€Obsidian æ— ç¼å¯¼å…¥

### ğŸ¤– AI æ¨¡å‹æ”¯æŒ

- **DeepSeek** (æ¨è) - æ€§ä»·æ¯”æé«˜çš„å›½äº§ AI æ¨¡å‹
- **OpenAI** - GPT-4 ç­‰å¼ºå¤§çš„å›½é™…æ¨¡å‹
- **æ™ºè°±AI** - å›½äº§é¢†å…ˆçš„ AI ä¾›åº”å•†

### ğŸ¨ ç”¨æˆ·ä½“éªŒ

- **æ·±è‰²æ¨¡å¼** - æ”¯æŒ light/dark/system ä¸»é¢˜
- **å“åº”å¼è®¾è®¡** - å®Œç¾æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **éª¨æ¶åŠ è½½å±** - ä¼˜é›…çš„åŠ è½½åŠ¨ç”»
- **é”®ç›˜å¿«æ·é”®** - Cmd+K å‘½ä»¤é¢æ¿ï¼Œå¿«é€Ÿå¯¼èˆª
- **æ‰¹é‡æ“ä½œ** - æ‰¹é‡åˆ é™¤ã€æ”¶è—ã€å¯¼å‡º

### ğŸ“¤ å¤šæ ¼å¼å¯¼å‡º

- **Markdown** - æ ‡å‡† .md æ ¼å¼
- **HTML** - å¸¦å®Œæ•´æ ·å¼çš„ .html æ–‡ä»¶
- **JSON** - ç»“æ„åŒ–æ•°æ®
- **Notion** - å¸¦ YAML frontmatter çš„ .md

### ğŸ”’ å®‰å…¨ç‰¹æ€§

- **ç”¨æˆ·è®¤è¯** - NextAuth.js v5 èº«ä»½éªŒè¯ç³»ç»Ÿ
- **API Key åŠ å¯†** - AES-256-GCM åŠ å¯†å­˜å‚¨ API å¯†é’¥
- **å¯†ç å“ˆå¸Œ** - bcryptjs å¯†ç åŠ å¯†
- **æ•°æ®éš”ç¦»** - æ¯ä¸ªç”¨æˆ·çš„æ•°æ®å®Œå…¨éš”ç¦»
- **HTTPS æ”¯æŒ** - ç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶ HTTPS

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**: Next.js 16.1 (App Router, Server Components)
- **UI åº“**: React 19.2
- **æ ·å¼**: Tailwind CSS 4
- **ç»„ä»¶åº“**: shadcn/ui (Radix UI)
- **çŠ¶æ€ç®¡ç†**: Zustand
- **ä¸»é¢˜**: next-themes
- **Markdown**: react-markdown + remark-gfm
- **é€šçŸ¥**: sonner

### åç«¯æŠ€æœ¯
- **è¿è¡Œæ—¶**: Next.js API Routes (Edge & Node)
- **æ•°æ®åº“**: SQLite + Prisma ORM
- **è®¤è¯**: NextAuth.js v5
- **åŠ å¯†**: crypto (Node.js built-in)
- **æŠ“å–**: Puppeteer + Cheerio + @sparticuz/chromium

### AI é›†æˆ
- **SDK**: OpenAI SDK (å…¼å®¹ OpenAI å…¼å®¹æ¥å£)
- **æµå¼è¾“å‡º**: Server-Sent Events (SSE)
- **å¤šæ¨¡å‹**: åŒæ—¶è°ƒç”¨å¤šä¸ªæ¨¡å‹å¯¹æ¯”
- **æ¨¡æ¿ç³»ç»Ÿ**: æ”¯æŒå˜é‡æ›¿æ¢çš„è‡ªå®šä¹‰ Prompt
- **è¶…æ—¶ä¸é‡è¯•**: 60 ç§’è¶…æ—¶ï¼Œ2 æ¬¡é‡è¯•æœºåˆ¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- Python >= 3.6 (Windows ç¼–è¯‘ native æ¨¡å—éœ€è¦ï¼Œå¯é€‰)
- npm / yarn / pnpm

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/your-username/wedigest.git
cd wedigest
```

#### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

#### 3. é…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# æ•°æ®åº“
DATABASE_URL="file:./dev.db"

# NextAuth å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»æ›´æ¢ï¼‰
AUTH_SECRET="your-secret-key-change-in-production"

# API Key åŠ å¯†å¯†é’¥ (ä»»æ„å­—ç¬¦ä¸²)
ENCRYPTION_KEY="your-encryption-key-change-in-production"

# AI Provider API Keys (å¯é€‰ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨ç•Œé¢é…ç½®)
OPENAI_API_KEY=""
OPENAI_BASE_URL=""
DEEPSEEK_API_KEY=""
DEEPSEEK_BASE_URL="https://api.deepseek.com"
ZHIPU_API_KEY=""

# é»˜è®¤ AI ä¾›åº”å•†
DEFAULT_AI_PROVIDER="deepseek"
```

#### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
npm run db:init
```

#### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000)

#### 6. é¦–æ¬¡ä½¿ç”¨

1. ç‚¹å‡»å³ä¸Šè§’"ç™»å½•"æŒ‰é’®
2. åˆ‡æ¢åˆ°"æ³¨å†Œ"æ ‡ç­¾é¡µæ³¨å†Œæ–°è´¦å·
3. ç™»å½•åè¿›å…¥"è®¾ç½®"é¡µé¢
4. é…ç½®è‡³å°‘ä¸€ä¸ª AI Provider çš„ API Keyï¼ˆæ”¯æŒè‡ªå®šä¹‰ API åœ°å€å’Œæ¨¡å‹åç§°ï¼‰
5. è¿”å›é¦–é¡µè¾“å…¥å¾®ä¿¡æ–‡ç« é“¾æ¥
6. é€‰æ‹© AI æ¨¡å‹å’Œç¬”è®°é£æ ¼
7. å¼€å§‹ç”Ÿæˆå­¦ä¹ ç¬”è®°

## ğŸ”‘ è·å– API Key

### DeepSeek (æ¨è)

1. è®¿é—® [https://platform.deepseek.com](https://platform.deepseek.com)
2. æ³¨å†Œè´¦å·
3. è¿›å…¥ API Keys é¡µé¢åˆ›å»ºå¯†é’¥
4. å¤åˆ¶ API Key åˆ°è®¾ç½®é¡µé¢

**ä¼˜åŠ¿ï¼š**
- æ€§ä»·æ¯”æé«˜ï¼ˆRMB 1/1000 tokensï¼‰
- ä¸­æ–‡ç†è§£èƒ½åŠ›å¼º
- å“åº”é€Ÿåº¦å¿«

### OpenAI

1. è®¿é—® [https://platform.openai.com/api-keys](https://platform.openai.com/api-keys)
2. ç™»å½•æˆ–æ³¨å†Œè´¦å·
3. åˆ›å»ºæ–°çš„ API Key
4. å¤åˆ¶åˆ°è®¾ç½®é¡µé¢

**ä¼˜åŠ¿ï¼š**
- æ¨¡å‹èƒ½åŠ›æœ€å¼º
- ç”Ÿæ€å®Œå–„
- é€šç”¨æ€§å¼º

### æ™ºè°±AI

1. è®¿é—® [https://open.bigmodel.cn](https://open.bigmodel.cn)
2. æ³¨å†Œå¹¶å®åè®¤è¯
3. è¿›å…¥æ§åˆ¶å°åˆ›å»º API Key
4. å¤åˆ¶åˆ°è®¾ç½®é¡µé¢

**ä¼˜åŠ¿ï¼š**
- å›½äº§é¢†å…ˆ
- æ”¯æŒä¸­æ–‡ä¼˜åŒ–
- æœåŠ¡ç¨³å®š

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ç¬”è®°é£æ ¼è¯´æ˜

#### ç®€æ´ç‰ˆ
é€‚ç”¨äºå¿«é€Ÿæµè§ˆå’Œå›é¡¾ã€‚

**åŒ…å«ï¼š**
- æ ¸å¿ƒè§‚ç‚¹ï¼ˆ2-3 å¥è¯ï¼‰
- å…³é”®è¦ç‚¹ï¼ˆ3-5 ä¸ªï¼‰

**å­—æ•°ï¼š** æ§åˆ¶åœ¨ç²¾ç®€èŒƒå›´å†…

#### è¯¦ç»†ç‰ˆ â­
é€‚ç”¨äºæ·±å…¥å­¦ä¹ å’Œç†è§£ã€‚

**åŒ…å«ï¼š**
- æ ¸å¿ƒè§‚ç‚¹ï¼ˆå®Œæ•´æ¦‚è¿°ï¼‰
- è¯¦ç»†è¦ç‚¹ï¼ˆå±•å¼€å„ä¸ªä¸»è¦éƒ¨åˆ†ï¼‰
- å…³é”®æ¦‚å¿µè§£é‡Šï¼ˆæä¾›èƒŒæ™¯ä¿¡æ¯ï¼‰
- é‡è¦ç»†èŠ‚/æ¡ˆä¾‹ï¼ˆå…³é”®æ•°æ®å’Œå®ä¾‹ï¼‰
- æ€è€ƒä¸å¯å‘ï¼ˆæç‚¼çš„æ€è€ƒå’Œè¡ŒåŠ¨å»ºè®®ï¼‰

**å­—æ•°ï¼š** 1500 å­—ä»¥å†…

#### è¦ç‚¹ç‰ˆ
é€‚ç”¨äºè®°å¿†å’Œå®è·µã€‚

**åŒ…å«ï¼š**
- æ ¸å¿ƒè§‚ç‚¹ï¼ˆä¸€å¥è¯ï¼‰
- ä¸»è¦è¦ç‚¹ï¼ˆ6-8 ä¸ªï¼‰
- å…³é”®æ¦‚å¿µï¼ˆç®€è¦è§£é‡Šï¼‰
- å®è·µå»ºè®®ï¼ˆå¯æ“ä½œï¼‰

**å­—æ•°ï¼š** 1000 å­—ä»¥å†…

### è‡ªå®šä¹‰ API é…ç½®

æ”¯æŒé…ç½®ç¬¬ä¸‰æ–¹ä¸­è½¬æœåŠ¡ï¼š

1. è¿›å…¥"è®¾ç½®"é¡µé¢
2. é€‰æ‹©å¯¹åº”çš„ AI ä¾›åº”å•†æ ‡ç­¾
3. å¡«å†™ API Key
4. ï¼ˆå¯é€‰ï¼‰å¡«å†™è‡ªå®šä¹‰ API åœ°å€ï¼ˆå¦‚ `https://your-api.com/v1`ï¼‰
5. ï¼ˆå¯é€‰ï¼‰å¡«å†™è‡ªå®šä¹‰æ¨¡å‹åç§°ï¼ˆå¦‚ `custom-model-name`ï¼‰
6. ç‚¹å‡»"ä¿å­˜"
7. ç‚¹å‡»"æµ‹è¯•è¿æ¥"éªŒè¯é…ç½®

**æ³¨æ„äº‹é¡¹ï¼š**
- API åœ°å€éœ€è¦åŒ…å«å®Œæ•´çš„è·¯å¾„
- æ¨¡å‹åç§°éœ€è¦ä¸ API æœåŠ¡å•†æä¾›çš„åç§°ä¸€è‡´
- æŸäº›ç¬¬ä¸‰æ–¹æœåŠ¡å¯èƒ½æœ‰é˜²æŠ¤ï¼Œå»ºè®®ä½¿ç”¨å®˜æ–¹ API

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
wedigest/
â”œâ”€â”€ docs/                   # é¡¹ç›®æ–‡æ¡£
â”‚   â””â”€â”€ development-summary.md  # å¼€å‘æ€»ç»“æ–‡æ¡£
â”œâ”€â”€ prisma/                # Prisma é…ç½®
â”‚   â”œâ”€â”€ schema.prisma     # æ•°æ®åº“æ¨¡å‹å®šä¹‰
â”‚   â””â”€â”€ dev.db            # SQLite æ•°æ®åº“æ–‡ä»¶ï¼ˆè¿è¡Œæ—¶ç”Ÿæˆï¼‰
â”œâ”€â”€ public/                # é™æ€èµ„æº
â”œâ”€â”€ scripts/               # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ check-env.js      # ç¯å¢ƒæ£€æŸ¥
â”‚   â””â”€â”€ create-tables.js # å¤‡ç”¨è¡¨åˆ›å»ºè„šæœ¬
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/              # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/        # API Routes
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/              # NextAuth è®¤è¯
â”‚   â”‚   â”‚   â”œâ”€â”€ fetch/             # æ–‡ç« æŠ“å–
â”‚   â”‚   â”‚   â”œâ”€â”€ summarize/        # AI ç¬”è®°ç”Ÿæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ summarize/compare/ # å¤šæ¨¡å‹å¯¹æ¯”
â”‚   â”‚   â”‚   â”œâ”€â”€ history/           # å†å²è®°å½•
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ batch/         # æ‰¹é‡æ“ä½œ
â”‚   â”‚   â”‚   â”œâ”€â”€ prompt-templates/ # æ¨¡æ¿ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ tags/              # æ ‡ç­¾ç»Ÿè®¡
â”‚   â”‚   â”‚   â”œâ”€â”€ export/            # å¯¼å‡ºåŠŸèƒ½
â”‚   â”‚   â”‚   â””â”€â”€ settings/          # è®¾ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ templates/      # æ¨¡æ¿ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ compare/        # æ¨¡å‹å¯¹æ¯”é¡µé¢
â”‚   â”‚   â”œâ”€â”€ history/        # å†å²è®°å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ login/          # ç™»å½•/æ³¨å†Œé¡µé¢
â”‚   â”‚   â”œâ”€â”€ result/         # ç¬”è®°ç»“æœé¡µé¢
â”‚   â”‚   â”œâ”€â”€ settings/       # è®¾ç½®é¡µé¢
â”‚   â”‚   â”œâ”€â”€ layout.tsx      # æ ¹å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ page.tsx        # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ error.tsx       # é”™è¯¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ global-error.tsx # å…¨å±€é”™è¯¯é¡µé¢
â”‚   â”‚   â””â”€â”€ not-found.tsx    # 404 é¡µé¢
â”‚   â”œâ”€â”€ components/       # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/            # shadcn/ui åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ skeleton/      # éª¨æ¶å±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ history/       # å†å²ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ command-palette.tsx  # å‘½ä»¤é¢æ¿
â”‚   â”‚   â”œâ”€â”€ theme-toggle.tsx     # ä¸»é¢˜åˆ‡æ¢
â”‚   â”‚   â”œâ”€â”€ error-boundary.tsx    # é”™è¯¯è¾¹ç•Œ
â”‚   â”‚   â”œâ”€â”€ tag-cloud.tsx         # æ ‡ç­¾äº‘
â”‚   â”‚   â”œâ”€â”€ tag-filter.tsx        # æ ‡ç­¾ç­›é€‰
â”‚   â”‚   â””â”€â”€ providers.tsx         # Provider é…ç½®
â”‚   â”œâ”€â”€ lib/            # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ ai-providers/    # AI ä¾›åº”å•†é€‚é…å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ base.ts         # åŸºç¡€æŠ½è±¡ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ openai.ts       # OpenAI å®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ deepseek.ts     # DeepSeek å®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ zhipu.ts        # æ™ºè°±AI å®ç°
â”‚   â”‚   â”‚   â””â”€â”€ index.ts        # Provider å·¥å‚
â”‚   â”‚   â”œâ”€â”€ prompts/        # Prompt æ¨¡æ¿
â”‚   â”‚   â”‚   â””â”€â”€ presets.ts     # é¢„è®¾æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ export/         # å¯¼å‡ºæ ¼å¼
â”‚   â”‚   â”‚   â””â”€â”€ formats.ts     # æ ¼å¼å¤„ç†
â”‚   â”‚   â”œâ”€â”€ api/            # API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â””â”€â”€ client.ts      # ç»Ÿä¸€ API å°è£…
â”‚   â”‚   â”œâ”€â”€ scraper/        # æ–‡ç« æŠ“å–æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ auth.ts         # NextAuth é…ç½®
â”‚   â”‚   â”œâ”€â”€ db.ts           # Prisma å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ crypto.ts       # åŠ å¯†å·¥å…·
â”‚   â”‚   â”œâ”€â”€ errors.ts       # é”™è¯¯å¤„ç†
â”‚   â”‚   â””â”€â”€ utils.ts        # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ hooks/           # React Hooks
â”‚   â”‚   â”œâ”€â”€ use-keyboard-shortcuts.ts  # é”®ç›˜å¿«æ·é”®
â”‚   â”‚   â”œâ”€â”€ use-debounce.ts            # é˜²æŠ–é’©å­
â”‚   â”‚   â””â”€â”€ use-streaming-summary.ts  # æµå¼è¾“å‡º
â”‚   â”œâ”€â”€ store/           # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ app-store.ts  # åº”ç”¨çŠ¶æ€
â”‚   â”œâ”€â”€ types/           # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ api.ts                # API ç±»å‹
â”‚   â”‚   â”œâ”€â”€ ai-provider.ts       # AI æä¾›è€…ç±»å‹
â”‚   â”‚   â”œâ”€â”€ prompt.ts            # æ¨¡æ¿ç±»å‹
â”‚   â”‚   â””â”€â”€ next-auth.d.ts       # NextAuth ç±»å‹
â”‚   â””â”€â”€ __tests__/       # æµ‹è¯•æ–‡ä»¶
â”‚       â”œâ”€â”€ setup.ts              # æµ‹è¯•é…ç½®
â”‚       â”œâ”€â”€ lib/
â”‚       â”‚   â”œâ”€â”€ api/
â”‚       â”‚   â”‚   â””â”€â”€ client.test.ts   # API å®¢æˆ·ç«¯æµ‹è¯•
â”‚       â”‚   â””â”€â”€ errors.test.ts     # é”™è¯¯å¤„ç†æµ‹è¯•
â”‚       â””â”€â”€ ...
â”œâ”€â”€ .env                 # ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.example         # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ package.json         # é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜
```

## ğŸ—„ï¸ æ•°æ®åº“ç®¡ç†

### å¯ç”¨å‘½ä»¤

```bash
# åˆå§‹åŒ–æ•°æ®åº“
npm run db:init

# ç”Ÿæˆ Prisma Client
npx prisma generate

# æ¨é€æ•°æ®åº“ç»“æ„
npx prisma db push

# é‡æ–°ç¼–è¯‘ better-sqlite3 (Windows ä¸Šé‡åˆ°é—®é¢˜)
npm run db:rebuild

# ä½¿ç”¨å¤‡ç”¨è„šæœ¬åˆ›å»ºè¡¨
npm run db:create-tables

# ç¯å¢ƒæ£€æŸ¥
npm run db:check
```

### æ•°æ®æ¨¡å‹

- **User** - ç”¨æˆ·ä¿¡æ¯
- **ApiKey** - åŠ å¯†å­˜å‚¨çš„ API å¯†é’¥ï¼ˆåŒ…å«è‡ªå®šä¹‰é…ç½®ï¼‰
- **Summary** - å­¦ä¹ ç¬”è®°å†å²è®°å½•

## ğŸ”Œ API ç«¯ç‚¹

### è®¤è¯
- `GET/POST /api/auth/[...nextauth]` - NextAuth.js è®¤è¯
- `POST /api/register` - ç”¨æˆ·æ³¨å†Œ

### æ–‡ç« å¤„ç†
- `POST /api/fetch` - æŠ“å–å¾®ä¿¡å…¬ä¼—å·æ–‡ç« 
- `POST /api/summarize` - ç”Ÿæˆ AI å­¦ä¹ ç¬”è®°ï¼ˆæ”¯æŒæµå¼è¾“å‡ºï¼‰
- `POST /api/summarize/compare` - å¤šæ¨¡å‹å¯¹æ¯”

### å†å²è®°å½•
- `GET /api/history` - è·å–å†å²è®°å½•ï¼ˆæ”¯æŒæœç´¢ã€ç­›é€‰ã€åˆ†é¡µï¼‰
- `GET /api/history/[id]` - è·å–å•æ¡è®°å½•
- `DELETE /api/history/[id]` - åˆ é™¤è®°å½•
- `POST /api/history/batch` - æ‰¹é‡æ“ä½œï¼ˆåˆ é™¤ã€æ”¶è—ã€å¯¼å‡ºï¼‰

### å¯¼å‡º
- `GET /api/export` - å¯¼å‡ºå­¦ä¹ ç¬”è®°ï¼ˆæ”¯æŒ md/html/json/notion æ ¼å¼ï¼‰

### Prompt æ¨¡æ¿
- `GET /api/prompt-templates` - è·å–æ¨¡æ¿åˆ—è¡¨
- `POST /api/prompt-templates` - åˆ›å»ºè‡ªå®šä¹‰æ¨¡æ¿
- `GET /api/prompt-templates/[id]` - è·å–å•ä¸ªæ¨¡æ¿
- `PATCH /api/prompt-templates/[id]` - æ›´æ–°æ¨¡æ¿
- `DELETE /api/prompt-templates/[id]` - åˆ é™¤æ¨¡æ¿
- `POST /api/prompt-templates/[id]/use` - è®°å½•æ¨¡æ¿ä½¿ç”¨

### æ ‡ç­¾
- `GET /api/tags` - è·å–æ ‡ç­¾ç»Ÿè®¡

### è®¾ç½®
- `GET /api/settings/api-key` - è·å– API Keys
- `POST /api/settings/api-key` - ä¿å­˜ API Key
- `DELETE /api/settings/api-key` - åˆ é™¤ API Key
- `POST /api/settings/test-api` - æµ‹è¯• API è¿æ¥

## ğŸš¢ éƒ¨ç½²

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

### å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨

```bash
npm start
```

### éƒ¨ç½²å¹³å°å»ºè®®

#### Vercel (æ¨è)
- é›¶é…ç½®éƒ¨ç½²
- è‡ªåŠ¨ HTTPS
- å…¨çƒ CDN
- æ³¨æ„ï¼šéœ€è¦é…ç½®ç¯å¢ƒå˜é‡

#### Railway
- æ”¯æŒ SQLite
- è‡ªåŠ¨æŒä¹…åŒ–å­˜å‚¨
- ç®€å•æ˜“ç”¨

#### VPS / è‡ªå»º (æœ€çµæ´»)
- å®Œå…¨æ§åˆ¶
- å¯ä½¿ç”¨ä»»æ„æ•°æ®åº“
- é€‚åˆé«˜å¹¶å‘åœºæ™¯

### ç”Ÿäº§ç¯å¢ƒæ³¨æ„äº‹é¡¹

1. **æ›´æ¢å¯†é’¥**
   - `AUTH_SECRET` - ä½¿ç”¨ `openssl rand -base64 32` ç”Ÿæˆ
   - `ENCRYPTION_KEY` - ä½¿ç”¨å¼ºéšæœºå­—ç¬¦ä¸²

2. **é…ç½®æ•°æ®åº“**
   - ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ PostgreSQL æˆ– MySQL
   - ä¿®æ”¹ `DATABASE_URL` ç¯å¢ƒå˜é‡
   - è¿è¡Œ `npx prisma migrate deploy`

3. **è®¾ç½®ç¯å¢ƒå˜é‡**
   - ç¡®ä¿æ‰€æœ‰æ•æ„Ÿä¿¡æ¯é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®
   - ä¸è¦å°† `.env` æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶

4. **HTTPS é…ç½®**
   - ä½¿ç”¨åå‘ä»£ç†ï¼ˆNginxã€Caddyï¼‰
   - é…ç½® SSL è¯ä¹¦
   - å¯ç”¨ HSTS

## ğŸ§ª å¼€å‘æŒ‡å—

### è¿è¡Œå¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

### ä»£ç æ£€æŸ¥

```bash
npm run lint
```

### æ·»åŠ æ–°çš„ AI ä¾›åº”å•†

1. åœ¨ `src/types/ai-provider.ts` ä¸­æ·»åŠ ä¾›åº”å•†ç±»å‹
2. åœ¨ `src/lib/ai-providers/` ä¸­åˆ›å»ºæ–°çš„ä¾›åº”å•†é€‚é…å™¨
3. ç»§æ‰¿ `BaseAIProvider` æŠ½è±¡ç±»
4. å®ç° `summarize` æ–¹æ³•
5. åœ¨ `src/lib/ai-providers/index.ts` ä¸­æ³¨å†Œä¾›åº”å•†
6. åœ¨ `src/app/page.tsx` ä¸­æ·»åŠ  UI é€‰é¡¹

### ä¿®æ”¹ç¬”è®°æç¤ºè¯

ç¼–è¾‘ `src/lib/ai-providers/base.ts` ä¸­çš„ `buildPrompt` æ–¹æ³•ï¼Œè‡ªå®šä¹‰ï¼š
- ç¬”è®°é£æ ¼æŒ‡å¯¼
- è¾“å‡ºæ ¼å¼è¦æ±‚
- å­—æ•°é™åˆ¶

## â“ å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥

**é—®é¢˜ï¼š** Windows ä¸Š Prisma å¼•æ“æŠ¥é”™

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
npm run db:init
```

å¦‚æœä»ç„¶å¤±è´¥ï¼š
```bash
npm run db:rebuild
```

### 2. Puppeteer æŠ“å–å¤±è´¥

**é—®é¢˜ï¼š** Chromium ä¸‹è½½å¤±è´¥æˆ–å¯åŠ¨å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
- ç¡®ä¿å·²å®‰è£…å®Œæ•´ä¾èµ–ï¼š`npm install puppeteer`
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ä½¿ç”¨å¤‡ç”¨æŠ“å–æ–¹å¼

### 3. AI API è°ƒç”¨å¤±è´¥

**é—®é¢˜ï¼š** è¿æ¥è¶…æ—¶æˆ–è¿”å›é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥ API Key é…ç½®æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ API åœ°å€å’Œæ¨¡å‹åç§°
- å°è¯•ä½¿ç”¨å®˜æ–¹ APIï¼ˆç¬¬ä¸‰æ–¹æœåŠ¡å¯èƒ½æœ‰é˜²æŠ¤ï¼‰
- æŸ¥çœ‹ `API_BYPASS.md` äº†è§£é˜²æŠ¤ç»•è¿‡æ–¹æ¡ˆ

### 4. Windows ä¸Šç¼–è¯‘å¤±è´¥

**é—®é¢˜ï¼š** better-sqlite3 ç¼–è¯‘å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
- å®‰è£… Visual C++ Redistributable: https://aka.ms/vs/17/release/vc_redist.x64.exe
- è¿è¡Œ `npm run db:rebuild` é‡æ–°ç¼–è¯‘

### 5. å­¦ä¹ ç¬”è®°æ ¼å¼ä¸æ­£ç¡®

**é—®é¢˜ï¼š** AI è¿”å›çš„å†…å®¹æ ¼å¼ä¸ç¬¦åˆé¢„æœŸ

**è§£å†³æ–¹æ¡ˆï¼š**
- æŸ¥çœ‹ç»ˆç«¯æ—¥å¿—ç¡®è®¤å®é™…è¯·æ±‚å†…å®¹
- å°è¯•ä¸åŒçš„ AI æ¨¡å‹
- è°ƒæ•´ç¬”è®°é£æ ¼ï¼ˆç®€æ´ç‰ˆ/è¯¦ç»†ç‰ˆ/è¦ç‚¹ç‰ˆï¼‰

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [docs/development-summary.md](docs/development-summary.md) - **å¼€å‘æ€»ç»“æ–‡æ¡£** (æœ¬æ¬¡å¼€å‘å®Œæ•´è®°å½•)
- [AGENTS.md](AGENTS.md) - ä»£ç†ç¼–ç æŒ‡å—
- [QUICKSTART.md](QUICKSTART.md) - å¿«é€Ÿå¼€å§‹æŒ‡å—
- [API_BYPASS.md](API_BYPASS.md) - API é˜²æŠ¤ç»•è¿‡è¯´æ˜
- [API_TROUBLESHOOTING.md](API_TROUBLESHOOTING.md) - API è¿æ¥é—®é¢˜æ’æŸ¥
- [NOTE_FEATURE.md](NOTE_FEATURE.md) - å­¦ä¹ ç¬”è®°åŠŸèƒ½è¯´æ˜

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### å¼€å‘è§„èŒƒ

- éµå¾ªç°æœ‰çš„ä»£ç é£æ ¼
- æ·»åŠ å¿…è¦çš„ç±»å‹å®šä¹‰
- ç¼–å†™æ¸…æ™°çš„æäº¤ä¿¡æ¯
- æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT](LICENSE) å¼€æºåè®®ã€‚

## ğŸ™ è‡´è°¢

- [Next.js](https://nextjs.org/) - React æ¡†æ¶
- [Prisma](https://www.prisma.io/) - ORM å·¥å…·
- [Radix UI](https://www.radix-ui.com/) - UI ç»„ä»¶åº“
- [Tailwind CSS](https://tailwindcss.com/) - CSS æ¡†æ¶
- [shadcn/ui](https://ui.shadcn.com/) - ç»„ä»¶åº“
- [OpenAI](https://openai.com/) - AI SDK
- [DeepSeek](https://www.deepseek.com/) - AI æœåŠ¡å•†
- [æ™ºè°±AI](https://open.bigmodel.cn/) - AI æœåŠ¡å•†

## ğŸ“® è”ç³»æ–¹å¼

- é—®é¢˜åé¦ˆï¼šæäº¤ [Issue](https://github.com/your-username/wedigest/issues)
- åŠŸèƒ½å»ºè®®ï¼šæäº¤ [Feature Request](https://github.com/your-username/wedigest/issues)

---

**æ³¨æ„ï¼š** æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œä¸ªäººä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºå•†ä¸šç”¨é€”ã€‚ä½¿ç”¨æœ¬å·¥å…·æŠ“å–å’Œæ€»ç»“æ–‡ç« æ—¶ï¼Œè¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„å’ŒæœåŠ¡æ¡æ¬¾ã€‚
